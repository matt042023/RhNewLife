{# Reusable document card component
   Usage:
   {% include 'components/documents/_document_card.html.twig' with {
       'document': documentObject,
       'showActions': true|false,
       'compact': true|false
   } %}
#}

{% set compact = compact|default(false) %}
{% set showActions = showActions|default(true) %}

<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow {{ compact ? 'p-3' : 'p-4' }}">
    <div class="flex items-start gap-3">
        {# Document icon #}
        <div class="flex-shrink-0">
            {% include 'components/documents/_document_type_icon.html.twig' with {
                'type': document.type,
                'iconClass': compact ? 'w-8 h-8' : 'w-10 h-10'
            } %}
        </div>

        {# Document info #}
        <div class="flex-1 min-w-0">
            <div class="flex items-start justify-between gap-2">
                <div class="flex-1 min-w-0">
                    <h3 class="text-sm font-medium text-gray-900 dark:text-white truncate">
                        <a href="{{ path('admin_documents_view', {id: document.id}) }}"
                           class="hover:text-blue-600 dark:hover:text-blue-400">
                            {{ document.originalName }}
                        </a>
                    </h3>
                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                        {{ document.typeLabel ?? document.type }}
                    </p>
                </div>

                {# Status badge #}
                <div class="flex-shrink-0">
                    {% include 'components/documents/_document_status_badge.html.twig' with {
                        'status': document.status,
                        'isArchived': document.isArchived
                    } %}
                </div>
            </div>

            {% if not compact %}
            {# Additional metadata #}
            <div class="mt-3 flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400">
                {% if document.user %}
                <div class="flex items-center gap-1">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <a href="{{ path('admin_users_show', {id: document.user.id}) }}"
                       class="text-blue-600 hover:text-blue-700 dark:text-blue-400">
                        {{ document.user.fullName }}
                    </a>
                </div>
                {% endif %}

                <div class="flex items-center gap-1">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    {{ document.uploadedAt ? document.uploadedAt|date('d/m/Y') : '—' }}
                </div>

                <div class="flex items-center gap-1">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    {{ document.fileSizeFormatted }}
                </div>
            </div>
            {% endif %}

            {# Actions #}
            {% if showActions %}
            <div class="mt-3 flex gap-2">
                <a href="{{ path('admin_documents_view', {id: document.id}) }}"
                   class="inline-flex items-center px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded-lg transition-colors">
                    <svg class="w-3.5 h-3.5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                    </svg>
                    Consulter
                </a>

                <a href="{{ path('admin_documents_download', {id: document.id}) }}"
                   class="inline-flex items-center px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 text-xs rounded-lg transition-colors">
                    <svg class="w-3.5 h-3.5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                    </svg>
                    Télécharger
                </a>
            </div>
            {% endif %}
        </div>
    </div>
</div>
