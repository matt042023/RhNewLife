{# Step 4: Activation options #}
<div class="space-y-8">
    <h2 class="text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2">
        <div class="w-8 h-8 glass-card rounded-lg flex items-center justify-center" style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.05)); border: 1px solid rgba(245, 158, 11, 0.2);">
            <svg class="w-5 h-5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" />
            </svg>
        </div>
        Activation du compte
    </h2>

    <p class="text-gray-600 dark:text-gray-400">
        Choisissez comment le salarié pourra accéder à son compte.
    </p>

    {# Activation options #}
    <div class="space-y-4">
        {# Option 1: Email activation #}
        <label class="activation-option block p-4 rounded-xl border-2 cursor-pointer transition-all
                      {{ (formData.activation_mode ?? 'email') == 'email' ? 'border-blue-500 bg-blue-50/50 dark:bg-blue-900/20' : 'border-white/10 hover:border-white/20' }}"
               data-direct-user-creation-target="activationOption"
               data-mode="email">
            <div class="flex items-start gap-3">
                <input type="radio" name="activation_mode" value="email"
                       class="mt-1 w-4 h-4 text-blue-600"
                       {{ (formData.activation_mode ?? 'email') == 'email' ? 'checked' : '' }}
                       data-action="change->direct-user-creation#handleActivationModeChange">
                <div class="flex-1">
                    <div class="flex items-center gap-2">
                        <span class="font-semibold text-gray-800 dark:text-gray-200">Email d'activation</span>
                        <span class="px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded-full">Recommandé</span>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
                        Le salarié recevra un email avec un lien pour définir son mot de passe. Le lien est valide 7 jours.
                    </p>
                    <div class="mt-2 flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                        </svg>
                        <span>Statut du compte: <strong>INVITÉ</strong> jusqu'à activation</span>
                    </div>
                </div>
            </div>
        </label>

        {# Option 2: Temporary password #}
        <label class="activation-option block p-4 rounded-xl border-2 cursor-pointer transition-all
                      {{ (formData.activation_mode ?? '') == 'password' ? 'border-amber-500 bg-amber-50/50 dark:bg-amber-900/20' : 'border-white/10 hover:border-white/20' }}"
               data-direct-user-creation-target="activationOption"
               data-mode="password">
            <div class="flex items-start gap-3">
                <input type="radio" name="activation_mode" value="password"
                       class="mt-1 w-4 h-4 text-amber-600"
                       {{ (formData.activation_mode ?? '') == 'password' ? 'checked' : '' }}
                       data-action="change->direct-user-creation#handleActivationModeChange">
                <div class="flex-1">
                    <span class="font-semibold text-gray-800 dark:text-gray-200">Mot de passe temporaire</span>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
                        Définissez un mot de passe temporaire. Le salarié devra le changer à sa première connexion.
                    </p>
                    <div class="mt-2 flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <span>Statut du compte: <strong>ACTIF</strong> immédiatement</span>
                    </div>
                </div>
            </div>
        </label>

        {# Temporary password input (shown only when password mode selected) #}
        <div class="password-section ml-7 p-4 bg-white/5 rounded-xl {{ (formData.activation_mode ?? '') != 'password' ? 'hidden' : '' }}"
             data-direct-user-creation-target="passwordSection">
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">
                        Mot de passe temporaire *
                    </label>
                    <div class="flex gap-2">
                        <input type="text" name="temporary_password" value="{{ formData.temporary_password ?? '' }}"
                               class="glass-input flex-1" placeholder="Minimum 8 caractères"
                               data-direct-user-creation-target="temporaryPassword">
                        <button type="button" class="glass-btn px-4"
                                data-action="click->direct-user-creation#generatePassword">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                            Générer
                        </button>
                    </div>
                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                        Ce mot de passe sera communiqué au salarié. Il devra le changer à sa première connexion.
                    </p>
                </div>

                <div class="flex items-start gap-2 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg">
                    <svg class="w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                    <p class="text-sm text-amber-800 dark:text-amber-200">
                        <strong>Important :</strong> Notez ce mot de passe et transmettez-le au salarié de manière sécurisée.
                    </p>
                </div>
            </div>
        </div>

        {# Option 3: No activation #}
        <label class="activation-option block p-4 rounded-xl border-2 cursor-pointer transition-all
                      {{ (formData.activation_mode ?? '') == 'none' ? 'border-gray-500 bg-gray-50/50 dark:bg-gray-800/50' : 'border-white/10 hover:border-white/20' }}"
               data-direct-user-creation-target="activationOption"
               data-mode="none">
            <div class="flex items-start gap-3">
                <input type="radio" name="activation_mode" value="none"
                       class="mt-1 w-4 h-4 text-gray-600"
                       {{ (formData.activation_mode ?? '') == 'none' ? 'checked' : '' }}
                       data-action="change->direct-user-creation#handleActivationModeChange">
                <div class="flex-1">
                    <span class="font-semibold text-gray-800 dark:text-gray-200">Pas d'activation maintenant</span>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
                        Le compte sera créé mais le salarié ne pourra pas se connecter. Vous pourrez envoyer une invitation plus tard.
                    </p>
                    <div class="mt-2 flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                        </svg>
                        <span>Statut du compte: <strong>INVITÉ</strong> (inactif)</span>
                    </div>
                </div>
            </div>
        </label>
    </div>
</div>
