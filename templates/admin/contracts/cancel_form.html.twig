{% extends 'admin.html.twig' %}

{% block title %}Annuler le contrat - RH NewLife{% endblock %}

{% block body %}
<div class="min-h-screen bg-gray-50 p-8">
	<div class="max-w-3xl mx-auto">

		{# Header #}
		<div class="mb-8">
			<a href="{{ path('app_admin_contracts_view', {id: contract.id}) }}" class="text-primary hover:underline mb-2 inline-block">
				← Retour au contrat
			</a>
			<h1 class="text-3xl font-bold text-gray-900">Annuler le contrat</h1>
			<p class="text-gray-600 mt-1">{{ contract.user.fullName }} - {{ contract.typeLabel }}</p>
		</div>

		{# Flash messages #}
		{% for label, messages in app.flashes %}
			{% for message in messages %}
				<div class="alert alert-{{ label == 'error' ? 'error' : (label == 'success' ? 'success' : 'info') }} mb-6">
					{{ message }}
				</div>
			{% endfor %}
		{% endfor %}

		{# Avertissement #}
		<div class="alert alert-warning mb-6">
			<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
			</svg>
			<div>
				<h3 class="font-bold">Attention</h3>
				<div class="text-sm">Cette action annulera définitivement le contrat. Le statut passera à "Annulé".</div>
			</div>
		</div>

		{# Formulaire #}
		<div class="bg-white rounded-2xl shadow-lg p-6">
			<form method="post">
				<div class="space-y-6">
					{# Informations contrat #}
					<div class="bg-gray-50 p-4 rounded-lg">
						<h3 class="font-bold mb-2">Informations du contrat</h3>
						<dl class="grid grid-cols-2 gap-4 text-sm">
							<div>
								<dt class="text-gray-600">Employé</dt>
								<dd class="font-semibold">{{ contract.user.fullName }}</dd>
							</div>
							<div>
								<dt class="text-gray-600">Type</dt>
								<dd class="font-semibold">{{ contract.typeLabel }}</dd>
							</div>
							<div>
								<dt class="text-gray-600">Statut actuel</dt>
								<dd><span class="badge">{{ contract.statusLabel }}</span></dd>
							</div>
							<div>
								<dt class="text-gray-600">Date création</dt>
								<dd class="font-semibold">{{ contract.createdAt|date('d/m/Y') }}</dd>
							</div>
						</dl>
					</div>

					{# Raison #}
					<div class="form-control">
						<label class="label">
							<span class="label-text font-semibold">Raison de l'annulation *</span>
						</label>
						<textarea
							name="reason"
							rows="4"
							class="textarea textarea-bordered w-full"
							placeholder="Expliquez la raison de l'annulation..."
							required
						></textarea>
						<label class="label">
							<span class="label-text-alt">Cette raison sera enregistrée dans l'historique du contrat</span>
						</label>
					</div>

					{# Buttons #}
					<div class="flex gap-4 pt-4 border-t">
						<button type="submit" class="btn btn-error">
							<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
							</svg>
							Confirmer l'annulation
						</button>
						<a href="{{ path('app_admin_contracts_view', {id: contract.id}) }}" class="btn btn-ghost">
							Annuler
						</a>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>
{% endblock %}
